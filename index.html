<html>
  <head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="js/fixerIoEuroConverter.js"></script>
    <meta charset="UTF-8">
  </head>
  <body>
     <h1> Fixer.io Euro converter </h1>
     <hr />
     <form>
       <input type='text' size='6' id='fldAmount'></input> EUR
       <select id ='currencies'>

       </select>
     </form>
    <span id='result' style="color:blue"></span>
    <br />
    <div id='error' style="color:red"></div>
   <script>

      // déclencheur une fois la page html chargée
      $( document ).ready(function() {

         var api = new fixerIoEuroConverter();
         api.init( '#currencies' ); 

      });
     // déclencheur au changement, coller, et touche clavier relâchée sur le champ de saisie du montant
     $( '#fldAmount' ).on("paste keyup change", function () {

         hideFields();
         var api = new fixerIoEuroConverter();
         api.convertCallback($( '#fldAmount' ).val(), $( '#currencies' ).val());

     });

     /* déclencheur au changement de la sélection de la liste des devises.
      * ne fait rien si la valeur de la saisie n'est pas un nombre 
      */
     $( '#currencies' ).on("change", function () {

        if ( $.isNumeric( $( '#fldAmount' ).val() ) === false ) { return; } 

        var api = new fixerIoEuroConverter();
          api.convertCallback($( '#fldAmount' ).val(), $( '#currencies' ).val());

     });

   </script>
  </body>
</html>
